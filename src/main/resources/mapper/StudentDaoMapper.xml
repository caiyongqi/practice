<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--<mapper namespace="com.graduation.practice.dao.UserDao">-->
<!--    <select id="findUserByAccount" parameterType="Student" resultType="Student">-->
<!--        SELECT * FROM user WHERE account = #{account}-->
<!--    </select>-->

<mapper namespace="com.graduation.practice.dao.StudentDao">
    <select id="findStudentByStudentId" parameterType="Student" resultType="Student">
        SELECT * FROM student WHERE studentId = #{studentId}
    </select>

    <!--=========================== 学生界面 =====================================================-->
    <select id="findUserByAccount" parameterType="User" resultType="User">
        SELECT * FROM user WHERE account = #{account} and type=5
    </select>
    <!--    &#45;&#45;         select * FROM student_to_score where studentId = #{studentId}-->
    <select id="findStudentScore" parameterType="StudentToScore" resultType="ScoreShow">
        SELECT course.id as courseId, course.`name`, course.`desc`, course.credit, student_to_score.score, student_to_score.startTime, student_to_score.endTime FROM student_to_score, course WHERE course.id = student_to_score.courseId and studentId=#{studentId} ORDER BY id
    </select>

<!--    <select id="findCourseInfo" parameterType="list" resultType="Course">-->
<!--        select * FROM course where id in-->
<!--        <foreach collection="list" item="id" open="(" close=")" separator=",">-->
<!--            #{id}-->
<!--        </foreach>-->
<!--    </select>-->

    <!--    学生信息获取-->
    <select id="findStudentInfo" parameterType="User" resultType="Student">
        SELECT * FROM student WHERE studentId = #{account}
    </select>
    <select id="findAllStudent"  resultType="Student">
        SELECT * FROM student
        <if test="(studentName != null and studentName != '') or (classId != null and classId != 0)" >
            where
        </if>
        <if test="studentName != null and studentName != ''">
            name like concat("%", #{studentName}, "%")
        </if>
        <if test="classId != null and classId != 0 and studentName != null and studentName != ''">
            and
        </if>
        <if test="classId != null and classId != 0">
            classId = #{classId}
        </if>
    </select>
    <insert id="insertStudent" parameterType="Student">
        INSERT INTO student (studentId,name,age,gender,address,email,phoneNumber,classId,date) VALUES (#{studentId},#{name},#{age},#{gender},#{address},#{email},#{phoneNumber},#{classId},#{date})
    </insert>

    <update id="updateStudent" parameterType="student">
        UPDATE student SET name = #{name}, age = #{age}, gender=#{gender}, address=#{address}, email=#{email}, phoneNumber=#{phoneNumber}, classId= #{classId},date=#{date} WHERE studentId=#{studentId}
    </update>

    <select id="adminFindStudentByStudentId" parameterType="String" resultType="Student">
        SELECT * FROM student WHERE studentId = #{studentId}
    </select>

    <delete id="deleteSelectedStudent" parameterType="List">
        DELETE FROM student WHERE studentId IN
        <foreach collection="list" item="studentId" open="(" close=")" separator=",">
            #{studentId}
        </foreach>
    </delete>

    <select id="findStudentById" parameterType="Student" resultType="Student">
        SELECT * FROM student WHERE id = #{id}
    </select>
</mapper>